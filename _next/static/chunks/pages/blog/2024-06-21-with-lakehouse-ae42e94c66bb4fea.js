(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3204],{211:function(e,d,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/2024-06-21-with-lakehouse",function(){return n(2161)}])},2161:function(e,d,n){"use strict";n.r(d),n.d(d,{default:function(){return o},useTOC:function(){return h}});var i=n(2676),l=n(8051),c=n(4906),s=n(3459),r={src:"/_next/static/media/cross-network-pipe.fa67d0fc.png",height:520,width:2350,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAMElEQVR42g3HsREAIAgDQPdfVpNIgKPR736JtH2jqnpmqhsMu1dIBDd+LMnOgzzwA39rLe5ATZkYAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2};function h(e){let d={code:"code",...(0,s.a)()};return[{value:"方案优势",id:"方案优势",depth:2},{value:"开箱即用，10 分钟完成配置",id:"开箱即用10-分钟完成配置",depth:3},{value:"全、增量一体化，无需运维干预",id:"全增量一体化无需运维干预",depth:3},{value:"推数据，而不是暴露端口",id:"推数据而不是暴露端口",depth:3},{value:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.code,{children:"Oracle"}),"链路的独特优势"]}),id:"oracle链路的独特优势",depth:2},{value:(0,i.jsxs)(i.Fragment,{children:["对",(0,i.jsx)(d.code,{children:"DDL"}),"行为的深度兼容"]}),id:"对ddl行为的深度兼容",depth:3},{value:"大事务优化",id:"大事务优化",depth:3},{value:"全面支持名称超过 30 字符的表",id:"全面支持名称超过-30-字符的表",depth:3},{value:(0,i.jsxs)(i.Fragment,{children:["适配支持",(0,i.jsx)(d.code,{children:"RAC"}),"架构"]}),id:"适配支持rac架构",depth:3}]}var o=(0,l.c)(function(e){let{toc:d=h(e)}=e,n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{children:"构建跨网络数据管道最佳实践"}),"\n",(0,i.jsxs)(n.p,{children:["本文以",(0,i.jsx)(n.a,{href:"https://yunqi.tech/",children:"云器"})," ",(0,i.jsx)(n.code,{children:"Lakehouse"})," 为例，介绍利用",(0,i.jsx)(n.code,{children:"bluepipe"}),"构建跨网络的数据复制最佳实践。"]}),"\n",(0,i.jsxs)(n.p,{children:["如下图，客户业务系统部署在私有 IDC 中，而",(0,i.jsx)(n.code,{children:"Lakehouse"}),"作为多租户湖仓服务部署在云上。数据需要从",(0,i.jsx)(n.code,{children:"Oracle"}),"同步到",(0,i.jsx)(n.code,{children:"Lakehouse"}),"\n，我们推荐将",(0,i.jsx)(n.code,{children:"bluepipe"}),"部署在客户 IDC 中，",(0,i.jsx)(n.strong,{children:"推"}),"数据到",(0,i.jsx)(n.code,{children:"Lakehouse"}),"。"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Oracle to Lakehouse",placeholder:"blur",src:r})}),"\n",(0,i.jsx)(n.h2,{id:d[0].id,children:d[0].value}),"\n",(0,i.jsx)(n.h3,{id:d[1].id,children:d[1].value}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bluepipe"}),"几乎可以运行在任何",(0,i.jsx)(n.code,{children:"Linux"}),"系统中，支持",(0,i.jsx)(n.code,{children:"x86"}),"和",(0,i.jsx)(n.code,{children:"arm"}),"芯片；常见的机架式服务器、笔记本电脑，甚至树莓派都可以用来部署；"]}),"\n",(0,i.jsx)(n.li,{children:"极简的配置过程，默认参数即可达到最佳性能。"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:d[2].id,children:d[2].value}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"全量同步与增量同步深度协同，几乎无需日常运维操作；"}),"\n",(0,i.jsx)(n.li,{children:"高效的数据比对与热修复技术，始终保证数据一致；"}),"\n",(0,i.jsxs)(n.li,{children:["高度鲁棒的",(0,i.jsx)(n.code,{children:"Schema Evolution"}),"。"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:d[3].id,children:d[3].value}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bluepipe"}),"与您的数据库一起部署在您的内网，无需对外暴露端口；"]}),"\n",(0,i.jsxs)(n.li,{children:["弹性",(0,i.jsx)(n.code,{children:"buffer size"}),"技术，在",(0,i.jsx)(n.code,{children:"吞吐(Throughput)"}),"和",(0,i.jsx)(n.code,{children:"延迟(latency)"}),"之间自动平衡。"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:d[4].id,children:d[4].value}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"bluepipe"}),"基于",(0,i.jsx)(n.code,{children:"Oracle LogMiner"}),"实现对变更数据的捕捉。与此同时，在以下几个方面做了深度优化："]}),"\n",(0,i.jsx)(n.h3,{id:d[5].id,children:d[5].value}),"\n",(0,i.jsxs)(n.p,{children:["在",(0,i.jsx)(n.code,{children:"LogMiner"}),"默认策略下，当发生",(0,i.jsx)(n.code,{children:"DDL"}),"行为后，相关表上后续的",(0,i.jsx)(n.code,{children:"DML"}),"操作均无法正确解析，从而导致无法正确捕捉到变更。"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"bluepipe"}),"维护了字典文件的自动构建策略，保证表结构变更后仍然能捕捉到正确的增量数据。"]}),"\n",(0,i.jsx)(n.h3,{id:d[6].id,children:d[6].value}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Oracle Redo Log"}),"中记录了完整的事务(",(0,i.jsx)(n.code,{children:"Transaction"}),")过程，而业务上通常仅希望拿到",(0,i.jsx)(n.code,{children:"commit"}),"\n之后的数据，因此，需要在传输过程中使用",(0,i.jsx)(n.code,{children:"buffer"}),"来暂存尚未",(0,i.jsx)(n.code,{children:"commit"}),"的变更记录。"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"bluepipe"}),"基于独特的内存管理技术，单节点上也能轻松应对千万量级的大事务。"]}),"\n",(0,i.jsx)(n.h3,{id:d[7].id,children:d[7].value}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Oracle 12.2"}),"版本之后，对表名、字段名的最大长度支持到了 128 字节。\n但因为种种原因，",(0,i.jsx)(n.code,{children:"LogMiner"}),"对于无",(0,i.jsx)(n.code,{children:"OGG LICENSE"}),"的实例，至今仍不支持对包含长名称的表的 DML\n解析，详情参考",(0,i.jsx)(n.a,{href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html",children:"官方文档"}),"。"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"bluepipe"}),"基于高效的流批融合技术，全面支持了此种情况下的增量数据捕捉与投递。"]}),"\n",(0,i.jsx)(n.h3,{id:d[8].id,children:d[8].value})]})},"/blog/2024-06-21-with-lakehouse",{filePath:"pages/blog/2024-06-21-with-lakehouse.md",timestamp:172853319e4,pageMap:c.v,frontMatter:{slug:"bluepipe-with-lakehouse",authors:["aleafs"],image:"/img/blog-static/cover-bridge.jpeg",tags:["lakehouse","network","Oracle"]},title:"构建跨网络数据管道最佳实践"},"undefined"==typeof RemoteContent?h:RemoteContent.useTOC)}},function(e){e.O(0,[9882,5982,2888,9774,179],function(){return e(e.s=211)}),_N_E=e.O()}]);