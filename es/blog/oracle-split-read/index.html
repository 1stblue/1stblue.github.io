<!doctype html>
<html lang="es" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Oracle大表的并行读取 | Bluepipe - 数据因自由流动而价值无限</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.1stblue.com/es/blog/oracle-split-read"><meta data-rh="true" property="og:locale" content="es"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="fr"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Oracle大表的并行读取 | Bluepipe - 数据因自由流动而价值无限"><meta data-rh="true" name="description" content="测试环境"><meta data-rh="true" property="og:description" content="测试环境"><meta data-rh="true" property="og:image" content="http://www.oracle.com/node/oce/storyhub/prod/api/v1.1/assets/CONT2211A10520EB41FBA9E95AA892CCEE34/native/rh08-oracle-for-azure-732x372.jpg"><meta data-rh="true" name="twitter:image" content="http://www.oracle.com/node/oce/storyhub/prod/api/v1.1/assets/CONT2211A10520EB41FBA9E95AA892CCEE34/native/rh08-oracle-for-azure-732x372.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-10-11T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/aleafs"><meta data-rh="true" property="article:tag" content="Oracle,ROWID,并行"><link data-rh="true" rel="icon" href="/es/favicon.svg"><link data-rh="true" rel="canonical" href="https://www.1stblue.com/es/blog/oracle-split-read"><link data-rh="true" rel="alternate" href="https://www.1stblue.com/blog/oracle-split-read" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.1stblue.com/fr/blog/oracle-split-read" hreflang="fr"><link data-rh="true" rel="alternate" href="https://www.1stblue.com/es/blog/oracle-split-read" hreflang="es"><link data-rh="true" rel="alternate" href="https://www.1stblue.com/blog/oracle-split-read" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://www.1stblue.com/es/blog/oracle-split-read","mainEntityOfPage":"https://www.1stblue.com/es/blog/oracle-split-read","url":"https://www.1stblue.com/es/blog/oracle-split-read","headline":"Oracle大表的并行读取","name":"Oracle大表的并行读取","description":"测试环境","datePublished":"2023-10-11T00:00:00.000Z","author":{"@type":"Person","name":"aleafs","description":"大龄程序员","url":"https://github.com/aleafs","image":"https://avatars.githubusercontent.com/u/535479"},"image":{"@type":"ImageObject","@id":"http://www.oracle.com/node/oce/storyhub/prod/api/v1.1/assets/CONT2211A10520EB41FBA9E95AA892CCEE34/native/rh08-oracle-for-azure-732x372.jpg","url":"http://www.oracle.com/node/oce/storyhub/prod/api/v1.1/assets/CONT2211A10520EB41FBA9E95AA892CCEE34/native/rh08-oracle-for-azure-732x372.jpg","contentUrl":"http://www.oracle.com/node/oce/storyhub/prod/api/v1.1/assets/CONT2211A10520EB41FBA9E95AA892CCEE34/native/rh08-oracle-for-azure-732x372.jpg","caption":"title image for the blog post: Oracle大表的并行读取"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://www.1stblue.com/es/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/es/blog/rss.xml" title="Bluepipe - 数据因自由流动而价值无限 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/es/blog/atom.xml" title="Bluepipe - 数据因自由流动而价值无限 Atom Feed"><link rel="stylesheet" href="/es/assets/css/styles.3331374e.css">
<script src="/es/assets/js/runtime~main.d710654f.js" defer="defer"></script>
<script src="/es/assets/js/main.44066622.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><div class="m-auto w-full navbar z-30 fixed"><header class="w-[1120px] m-auto py-[12px]"><nav class="flex justify-between items-center"><div class="w-[45%] flex justify-between items-center"><div class="w-[30%]"><a href="/"><img src="/logo.svg" alt="logo" width="103" height="24"></a></div><div class="w-[70%] flex gap-[40px]"><a href="/" class="relative text-[14px] group no-underline hover:no-underline hover:text-current">首页<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-black origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a><a href="/price" class="relative text-[14px] group no-underline hover:no-underline hover:text-current">价格<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-black origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a><a href="/docs/getting-started" class="relative text-[14px] group no-underline hover:no-underline hover:text-current">文档<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-black origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a><a href="/blog" class="relative text-[14px] group no-underline hover:no-underline hover:text-current">博客<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-black origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a></div></div><div class="w-[40%] flex justify-between items-center"><div class="w-[55%]"></div><div class="w-[45%] flex justify-between items-center"><div class="my-[4px] flex text-[14px] space-x-0"></div><div><button class="relative px-[24px] p-auto h-[32px] font-sans font-[400] text-[#000000] text-center overflow-hidden group bg-bp-blue-1 w-[104px] h-[32px] mr-0 rounded-[100px]"><span class="h-[20px] text-[14px] leading-[20px] text-center inline-block transition-transform duration-300 ease-in-out group-hover:-translate-x-2 text-white">申请试用</span><span class="absolute inset-y-0 right-5 flex items-center opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all duration-300 ease-in-out"><img src="/white-arrow.svg" alt="arrow"></span></button></div></div></div></nav></header></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Navegación de publicaciones recientes"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/es/blog/bluepipe-with-lakehouse">构建跨网络数据管道最佳实践</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/es/blog/v0.11.0-release-notes">Release Notes (v.0.11.0)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/es/blog/v0.10.1-release-notes">Release Notes (v.0.10.1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/es/blog/tips-for-sqlplus">Tips for sqlplus</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/es/blog/v095-release-notes">Release Notes (v0.9.5)</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Oracle大表的并行读取</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-10-11T00:00:00.000Z">11 de octubre de 2023</time> · <!-- -->3 min de lectura</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/aleafs" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/535479" alt="aleafs"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/aleafs" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">aleafs</span></a></div><small class="authorTitle_nd0D" title="大龄程序员">大龄程序员</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="测试环境">测试环境<a href="#测试环境" class="hash-link" aria-label="Enlace directo al 测试环境" title="Enlace directo al 测试环境">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="硬件">硬件<a href="#硬件" class="hash-link" aria-label="Enlace directo al 硬件" title="Enlace directo al 硬件">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据">数据<a href="#数据" class="hash-link" aria-label="Enlace directo al 数据" title="Enlace directo al 数据">​</a></h3>
<p><strong>表结构</strong></p>
<div class="language-oraclesqlplus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">create-table.sql</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-oraclesqlplus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE TPCH.FP_RAW_DATA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CP_IDX   number(20, 0)    not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WAFERID  varchar(10)      not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BIN      number(10, 0)    not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SITE     DOUBLE PRECISION,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X        DOUBLE PRECISION not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Y        DOUBLE PRECISION not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BIN_1    DOUBLE PRECISION not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BIN_2    DOUBLE PRECISION,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BIN_3    DOUBLE PRECISION,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- BIN_4 ~ BIN_39 DOUBLE PRECISION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BIN_40   DOUBLE PRECISION,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BIN_CODE VARCHAR(10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE UNIQUE INDEX TPCH.FP_RAW_IDX2 ON TPCH.FP_RAW_DATA (CP_IDX, WAFERID, X, Y);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>准备20,000万（2亿）行数据</strong></p>
<div class="language-oraclesqlplus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-oraclesqlplus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT TABLE_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     , NUM_ROWS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     , AVG_ROW_LEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     , ROUND(AVG_ROW_LEN * NUM_ROWS / 1024 / 1024 / 1024, 2) AS GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM ALL_TABLES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">where OWNER = &#x27;TPCH&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND TABLE_NAME = &#x27;FP_RAW_DATA_MARS3&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TABLE_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NUM_ROWS AVG_ROW_LEN	       GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------- ----------- ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FP_RAW_DATA_MARS3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 200000000	    99	    18.44</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>分16个分片进行，平均每个分片处理12,500,000（1250万）行数据</p>
<p>脚注<sup><a href="#user-content-fn-1-784864" id="user-content-fnref-1-784864" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="测试验证">测试验证<a href="#测试验证" class="hash-link" aria-label="Enlace directo al 测试验证" title="Enlace directo al 测试验证">​</a></h2>
<table><thead><tr><th style="text-align:center">编号</th><th style="text-align:left">切分字段</th><th style="text-align:left">切分方法</th></tr></thead><tbody><tr><td style="text-align:center">A</td><td style="text-align:left">CP_IDX</td><td style="text-align:left">Range: (Minimum, Maximum)</td></tr><tr><td style="text-align:center">B</td><td style="text-align:left">ROWID</td><td style="text-align:left">Range: (Minimum, Maximum)</td></tr><tr><td style="text-align:center">C</td><td style="text-align:left">ROWID</td><td style="text-align:left">Range: Scan</td></tr><tr><td style="text-align:center">D</td><td style="text-align:left">ROWID</td><td style="text-align:left">Range: DBMS_PARALLEL_EXECUTE.create_chunks_by_rowid</td></tr><tr><td style="text-align:center">E</td><td style="text-align:left">ROWID</td><td style="text-align:left">Hash</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-基于主键索引列按照min-max区间切分">A: 基于主键/索引列，按照(min, max)区间切分<a href="#a-基于主键索引列按照min-max区间切分" class="hash-link" aria-label="Enlace directo al A: 基于主键/索引列，按照(min, max)区间切分" title="Enlace directo al A: 基于主键/索引列，按照(min, max)区间切分">​</a></h3>
<div class="language-oraclesqlplus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-oraclesqlplus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT /*+parallel(4)*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    COUNT(1)       AS total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     , MIN(CP_IDX) AS lower</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     , MAX(CP_IDX) AS upper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM TPCH.FP_RAW_DATA;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-基于rowid按照min-max区间切分">B: 基于ROWID，按照(min, max)区间切分<a href="#b-基于rowid按照min-max区间切分" class="hash-link" aria-label="Enlace directo al B: 基于ROWID，按照(min, max)区间切分" title="Enlace directo al B: 基于ROWID，按照(min, max)区间切分">​</a></h3>
<div class="language-oraclesqlplus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-oraclesqlplus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT /*+parallel(4)*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    COUNT(1)      AS total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     , MIN(ROWID) AS lower</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     , MAX(ROWID) AS upper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM TPCH.FP_RAW_DATA;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="c-基于rowidscan-split-by-rows">C: 基于ROWID，Scan, split by rows<a href="#c-基于rowidscan-split-by-rows" class="hash-link" aria-label="Enlace directo al C: 基于ROWID，Scan, split by rows" title="Enlace directo al C: 基于ROWID，Scan, split by rows">​</a></h3>
<div class="language-oraclesqlplus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-oraclesqlplus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT /*+parallel(4)*/ id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM (SELECT id, ROWNUM AS rn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      FROM (SELECT ROWID AS id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            FROM TPCH.FP_RAW_DATA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ORDER BY ROWID) t) x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE MOD(rn, 12500000) = 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="d-dbms_parallel_execute包create_chunks_by_rowid">D: <code>DBMS_PARALLEL_EXECUTE</code>包<code>create_chunks_by_rowid</code><a href="#d-dbms_parallel_execute包create_chunks_by_rowid" class="hash-link" aria-label="Enlace directo al d-dbms_parallel_execute包create_chunks_by_rowid" title="Enlace directo al d-dbms_parallel_execute包create_chunks_by_rowid">​</a></h3>
<div class="language-oraclesqlplus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-oraclesqlplus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DBMS_PARALLEL_EXECUTE.create_task(task_name =&gt; &#x27;tpch_test&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DBMS_PARALLEL_EXECUTE.create_chunks_by_rowid(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            task_name =&gt; &#x27;tpch_test&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            table_owner =&gt; &#x27;TPCH&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            table_name =&gt; &#x27;FP_RAW_DATA&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            by_row =&gt; TRUE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            chunk_size =&gt; 12500000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">END;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT chunk_id, status, start_rowid, end_rowid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM user_parallel_execute_chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE task_name = &#x27;tpch_test&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY chunk_id;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="e-基于rowidhash切分">E: 基于ROWID，Hash切分<a href="#e-基于rowidhash切分" class="hash-link" aria-label="Enlace directo al E: 基于ROWID，Hash切分" title="Enlace directo al E: 基于ROWID，Hash切分">​</a></h3>
<div class="language-oraclesqlplus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">hello.sql</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-oraclesqlplus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM TPCH.FP_RAW_DATA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE MOD(DBMS_ROWID.ROWID_ROW_NUMBER(TPCH.FP_RAW_DATA.ROWID), 16) = 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="结论">结论<a href="#结论" class="hash-link" aria-label="Enlace directo al 结论" title="Enlace directo al 结论">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum
tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p></div></div>
<ol>
<li>在我们的场景中，允许<code>Partitioned Table</code>?</li>
<li>优先使用 <code>DBMS_PARALLEL_EXECUTE</code>包中的<code>create_chunks_by_rowid</code>方法，获取基于<code>ROWID</code>切分；</li>
<li>如果因为版本兼容性或者权限等原因导致1失败，则尝试采用；</li>
<li>啦啦啦</li>
</ol>
<!-- -->
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Enlace directo al Footnotes" title="Enlace directo al Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-1-784864">
<p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/arpls/DBMS_PARALLEL_EXECUTE.html" target="_blank" rel="noopener noreferrer">Oracle DBMS_PARALLEL_EXECUTE</a> <a href="#user-content-fnref-1-784864" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Etiquetas:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/es/blog/tags/oracle">Oracle</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/es/blog/tags/rowid">ROWID</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/es/blog/tags/并行">并行</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2023-10-11-oracle-split-read.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Editar esta página</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Barra de paginación de publicaciones del blog"><a class="pagination-nav__link pagination-nav__link--prev" href="/es/blog/v2023-release-notes"><div class="pagination-nav__sublabel">Publicación más reciente</div><div class="pagination-nav__label">Release Notes (v2023)</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#测试环境" class="table-of-contents__link toc-highlight">测试环境</a><ul><li><a href="#硬件" class="table-of-contents__link toc-highlight">硬件</a></li><li><a href="#数据" class="table-of-contents__link toc-highlight">数据</a></li></ul></li><li><a href="#测试验证" class="table-of-contents__link toc-highlight">测试验证</a><ul><li><a href="#a-基于主键索引列按照min-max区间切分" class="table-of-contents__link toc-highlight">A: 基于主键/索引列，按照(min, max)区间切分</a></li><li><a href="#b-基于rowid按照min-max区间切分" class="table-of-contents__link toc-highlight">B: 基于ROWID，按照(min, max)区间切分</a></li><li><a href="#c-基于rowidscan-split-by-rows" class="table-of-contents__link toc-highlight">C: 基于ROWID，Scan, split by rows</a></li><li><a href="#d-dbms_parallel_execute包create_chunks_by_rowid" class="table-of-contents__link toc-highlight">D: <code>DBMS_PARALLEL_EXECUTE</code>包<code>create_chunks_by_rowid</code></a></li><li><a href="#e-基于rowidhash切分" class="table-of-contents__link toc-highlight">E: 基于ROWID，Hash切分</a></li></ul></li><li><a href="#结论" class="table-of-contents__link toc-highlight">结论</a></li></ul></div></div></div></div></div><footer class="bg-black text-white"><div class="max-w-[1920px] m-auto"><div class="w-[1120px] m-auto bg-black"><div class="flex flex-col py-[83px] gap-[82px]"><div class="flex justify-between"><div class="text-white"><img src="/logo-footer.svg" alt="logo" width="124.02" height="28.8"><div class="mt-[31.2px]"><p class="mt-[12px] font-sans font-[400] text-[16px] leading-[28px]">余杭区仓前街道海创科技中心 3 幢</p><p class="mt-[12px] font-sans font-[400] text-[16px] leading-[19px]"><a href="mailto:sales@1stblue.com" class="relative text-[14px] group hover:no-underline hover:text-current">sales@1stblue.com<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-white origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a></p></div></div><div class="flex"><div><div class="font-sans font-[600] text-[14px] leading-[33.6px]">官网</div><div class="mt-[18px] font-sans font-[400] text-[14px] leading-[33.6px]"><div><a href="/" class="relative text-[14px] group hover:no-underline hover:text-current">首页<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-white origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a></div><div><a href="/price" class="relative text-[14px] group hover:no-underline hover:text-current">价格<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-white origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a></div></div></div></div></div><div class="h-[49px] flex justify-between text-[#FFFFFF] border-t-[1px] border-[#FFFFFF4D]"><div class="mt-[32px] font-sans font-[400] text-[12px] leading-[16.8px]">© 2022-2024 杭州萃蓝网络科技有限公司 保留所有权利</div><div class="mt-[32px] font-sans font-[400] text-[12px] leading-[17px] text-right"><a target="_blank" href="https://beian.miit.gov.cn" class="relative group hover:no-underline hover:text-current">浙ICP备2024076741号<span class="absolute left-0 bottom-[-2px] w-full h-[1px] bg-white origin-bottom scale-y-0 translate-y-[1px] transition-transform duration-200 ease-in-out group-hover:scale-y-100 group-hover:translate-y-0"></span></a></div></div></div></div></div></footer></div>
</body>
</html>